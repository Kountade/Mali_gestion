{% extends "base.html" %} {% load static %} {% block content %}
<div class="container">
  <div class="page-inner">
    <div class="page-header">
      <h3 class="fw-bold mb-3">Détails du Paiement</h3>
      <ul class="breadcrumbs mb-3">
        <li class="nav-home">
          <a href="{% url 'home' %}">
            <i class="icon-home"></i>
          </a>
        </li>
        <li class="separator">
          <i class="icon-arrow-right"></i>
        </li>
        <li class="nav-item">
          <a href="{% url 'liste_paiements' %}">Paiements</a>
        </li>
        <li class="separator">
          <i class="icon-arrow-right"></i>
        </li>
        <li class="nav-item active">Détails</li>
      </ul>
    </div>

    <div class="row">
      <div class="col-lg-8 mx-auto">
        <div class="card mb-4" style="border: 2px solid #007bff">
          <div
            class="card-header text-white fw-bold text-center"
            style="background-color: #007bff"
          >
            Détails du Paiement
          </div>
          <div class="card-body">
            <div class="row mb-4">
              <div class="col-md-6">
                <h5 class="fw-bold">Informations de l'Élève</h5>
                <p>
                  <strong>Nom :</strong> {{ paiement.eleve.nom }} {{ paiement.eleve.prenom }}
                </p>
                <p><strong>Classe :</strong> {{ paiement.eleve.classe.nom }}</p>
                <p>
                  <strong>Matricule :</strong> {{ paiement.eleve.matricule }}
                </p>
              </div>
              <div class="col-md-6">
                <h5 class="fw-bold">Informations des Parents</h5>
                <p>
                  <strong>Nom du Père :</strong> {{ eleve.nom_pere|default:"Non renseigné" }}
                </p>
                <p>
                  <strong>Téléphone du Père :</strong> {{ eleve.telephone_pere|default:"Non renseigné" }}
                </p>
                <p>
                  <strong>Nom de la Mère :</strong> {{ eleve.nom_mere|default:"Non renseigné" }}
                </p>
                <p>
                  <strong>Téléphone de la Mère :</strong> {{ eleve.telephone_mere|default:"Non renseigné" }}
                </p>
              </div>
            </div>

            <div class="row mb-4">
              <div class="col-md-6">
                <h5 class="fw-bold">Détails du Paiement</h5>
                <p><strong>Référence :</strong> {{ paiement.reference }}</p>
                <p>
                  <strong>Date de Paiement :</strong> {{ paiement.date_paiement|date:"d/m/Y" }}
                </p>
                <p>
                  <strong>Statut :</strong> {{ paiement.get_statut_display }}
                </p>
              </div>
              <div class="col-md-6">
                <h5 class="fw-bold">Détails Financiers</h5>
                <p><strong>Montant :</strong> {{ paiement.montant }} €</p>
                <p>
                  <strong>Plan de Paiement :</strong> {{  paiement.get_plan_paiement_display }}
                </p>
                <p><strong>Mois/Année :</strong> {{ paiement.mois_annee }}</p>
              </div>
            </div>

            <div class="row mb-4">
              <div class="col-md-12">
                <h5 class="fw-bold">Commentaires</h5>
                <p>{{ paiement.commentaires|default:"Aucun commentaire" }}</p>
              </div>
            </div>

            <!-- Boutons d'action -->
            <div class="text-center mt-4">
              <a
                href="{% url 'modifier_paiement' paiement.id %}"
                class="btn btn-warning btn-lg"
              >
                <i class="bi bi-pencil"></i> Modifier
              </a>
              <a
                href="{% url 'supprimer_paiement' paiement.id %}"
                class="btn btn-danger btn-lg"
              >
                <i class="bi bi-trash"></i> Supprimer
              </a>
              <!-- Remplacez le bouton JS par ceci -->
              <a href="{% url 'facture_pdf' paiement.id %}" class="btn btn-primary btn-lg" target="_blank">
                <i class="bi bi-file-earmark-pdf"></i> Générer une Facture
            </a>
              <a
                href="{% url 'liste_paiements' %}"
                class="btn btn-secondary btn-lg"
              >
                <i class="bi bi-arrow-left-circle"></i> Retour à la liste
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock content %}
